<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>This month in hax: July 2024 | hax</title>
<meta name=keywords content="this-month-in-hax"><meta name=description content="In July, we merged 32 PRs! ðŸŽ‰
On the side of the frontend and CLI, we had a lot of fixes and
improvements! The hax command line and rustc driver were
refactored, allowing for
better scaling and caching. We also improved the general ergonomics:
diagnostics can now be
output in JSON, we have improved error
messages&mldr; And we pushed
various bug fixes.
In the engine, we now resugar
asserts properly and
support dyn. We also
pushed various enhancements (visitors for the internal AST are
generated again, we propagate some more trait generics arguments&mldr;)
and bug fixes."><meta name=author content="Lucas Franceschino"><link rel=canonical href=https://hacspec.org/blog/posts/this-month-in-hax/2024-07/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.7470704bfbc43c89908f2a4cdf28ddd9f65b53347931cc6508a05c79c22db988.css integrity="sha256-dHBwS/vEPImQjypM3yjd2fZbUzR5McxlCKBcecItuYg=" rel="preload stylesheet" as=style><link rel=icon href=https://hacspec.org/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://hacspec.org/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://hacspec.org/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://hacspec.org/blog/apple-touch-icon.png><link rel=mask-icon href=https://hacspec.org/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://hacspec.org/blog/posts/this-month-in-hax/2024-07/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://hacspec.org/blog/posts/this-month-in-hax/2024-07/"><meta property="og:site_name" content="hax"><meta property="og:title" content="This month in hax: July 2024"><meta property="og:description" content="In July, we merged 32 PRs! ðŸŽ‰
On the side of the frontend and CLI, we had a lot of fixes and improvements! The hax command line and rustc driver were refactored, allowing for better scaling and caching. We also improved the general ergonomics: diagnostics can now be output in JSON, we have improved error messagesâ€¦ And we pushed various bug fixes.
In the engine, we now resugar asserts properly and support dyn. We also pushed various enhancements (visitors for the internal AST are generated again, we propagate some more trait generics argumentsâ€¦) and bug fixes."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-08-12T00:00:00+00:00"><meta property="article:modified_time" content="2024-08-12T00:00:00+00:00"><meta property="article:tag" content="This-Month-in-Hax"><meta property="og:image" content="https://hacspec.org/blog/papermod-cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://hacspec.org/blog/papermod-cover.png"><meta name=twitter:title content="This month in hax: July 2024"><meta name=twitter:description content="In July, we merged 32 PRs! ðŸŽ‰
On the side of the frontend and CLI, we had a lot of fixes and
improvements! The hax command line and rustc driver were
refactored, allowing for
better scaling and caching. We also improved the general ergonomics:
diagnostics can now be
output in JSON, we have improved error
messages&mldr; And we pushed
various bug fixes.
In the engine, we now resugar
asserts properly and
support dyn. We also
pushed various enhancements (visitors for the internal AST are
generated again, we propagate some more trait generics arguments&mldr;)
and bug fixes."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://hacspec.org/blog/posts/"},{"@type":"ListItem","position":2,"name":"This month in hax: July 2024","item":"https://hacspec.org/blog/posts/this-month-in-hax/2024-07/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"This month in hax: July 2024","name":"This month in hax: July 2024","description":"In July, we merged 32 PRs! ðŸŽ‰\nOn the side of the frontend and CLI, we had a lot of fixes and improvements! The hax command line and rustc driver were refactored, allowing for better scaling and caching. We also improved the general ergonomics: diagnostics can now be output in JSON, we have improved error messages\u0026hellip; And we pushed various bug fixes.\nIn the engine, we now resugar asserts properly and support dyn. We also pushed various enhancements (visitors for the internal AST are generated again, we propagate some more trait generics arguments\u0026hellip;) and bug fixes.\n","keywords":["this-month-in-hax"],"articleBody":"In July, we merged 32 PRs! ðŸŽ‰\nOn the side of the frontend and CLI, we had a lot of fixes and improvements! The hax command line and rustc driver were refactored, allowing for better scaling and caching. We also improved the general ergonomics: diagnostics can now be output in JSON, we have improved error messagesâ€¦ And we pushed various bug fixes.\nIn the engine, we now resugar asserts properly and support dyn. We also pushed various enhancements (visitors for the internal AST are generated again, we propagate some more trait generics argumentsâ€¦) and bug fixes.\nOn the topic of libraries and helper macros, users can now add requires and ensures clauses directly on traits.\nMerged Pull Requests #811: Add mli for phase_reconstruct_for_index_loops. #802: Add json format option #800: feat(engine/ocaml_of_json_schema): add val to keyword list #799: fix(bounded-ints): zero and one were inverted #797: Fix potentially looping predicate_id. #796: Add nicer error messages when rustc emits an error in detect_forking. #795: fix: precondition constraints should be of the shape true =\u003e pred #794: Resugar asserts #792: feat(frontend): Add option to control output directory #790: Allow ensures and requires on traits #788: Fix #296 #779: Support let-else pattern. #777: Small typo fixes for hax book #776: feat(book): fix checkboxes #769: Extensions to the proof-libs for libcrux-ml-kem #765: fix(engine/lib): import associated item projection on generic bounds #764: feat(hax-lib): allow requires \u0026 ensures on \u0026mut inputs functions #763: fix(hax-lib): refinements: various fixes #762: fix(hax-lib): use super::* in refinement expansion #759: fix(frontend): crashes on fn ptr #758: fix color printing in util script #756: fix(frontend): kill crate_type in HaxMeta #753: exporter: make it need nightly only when feature rustc is on #751: Engine: propagate trait generics arguments #750: feat(exporter): thir: call: separate trait VS method generic args #744: doc(engine): ppx_functor_application #743: Refactor of the frontend #730: fix(frontend): make path_to breadth-first #729: Move book from hacspec/book to hacspec/hax #727: fix(engine): Concrete_ident_generated: name -\u003e t, derive more #698: Generate visitors automatically Contributors paulmure maximebuyse karthikbhargavan W95Psp ","wordCount":"329","inLanguage":"en","image":"https://hacspec.org/blog/papermod-cover.png","datePublished":"2024-08-12T00:00:00Z","dateModified":"2024-08-12T00:00:00Z","author":{"@type":"Person","name":"Lucas Franceschino"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://hacspec.org/blog/posts/this-month-in-hax/2024-07/"},"publisher":{"@type":"Organization","name":"hax","logo":{"@type":"ImageObject","url":"https://hacspec.org/blog/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://hacspec.org/blog/ accesskey=h title="hax (Alt + H)">hax</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://hacspec.org/blog/archives title=Archive><span>Archive</span></a></li><li><a href=https://hacspec.org/blog/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://hacspec.org/blog/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">This month in hax: July 2024</h1><div class=post-meta><span title='2024-08-12 00:00:00 +0000 UTC'>August 12, 2024</span>&nbsp;Â·&nbsp;2 min&nbsp;Â·&nbsp;Lucas Franceschino</div></header><div class=post-content><p>In July, we merged 32 PRs! ðŸŽ‰</p><p>On the side of the frontend and CLI, we had a lot of fixes and
improvements! The <code>hax</code> command line and rustc driver were
<a href=https://github.com/hacspec/hax/pull/743>refactored</a>, allowing for
better scaling and caching. We also improved the general ergonomics:
diagnostics can <a href=https://github.com/hacspec/hax/pull/802>now</a> be
output in JSON, we have <a href=https://github.com/hacspec/hax/pull/796>improved error
messages</a>&mldr; And we pushed
various bug fixes.</p><p>In the engine, we now <a href=https://github.com/hacspec/hax/pull/794>resugar
asserts</a> properly and
<a href=https://github.com/hacspec/hax/pull/788>support <code>dyn</code></a>. We also
pushed various enhancements (visitors for the internal AST are
generated again, we propagate some more trait generics arguments&mldr;)
and bug fixes.</p><p>On the topic of libraries and helper macros, users can <a href=https://github.com/hacspec/hax/pull/790>now add
<code>requires</code> and <code>ensures</code>
clauses</a> directly on traits.</p><h1 id=merged-pull-requests>Merged Pull Requests<a hidden class=anchor aria-hidden=true href=#merged-pull-requests>#</a></h1><ul><li>#811: <a href=https://github.com/hacspec/hax/pull/811>Add mli for phase_reconstruct_for_index_loops.</a></li><li>#802: <a href=https://github.com/hacspec/hax/pull/802>Add json format option</a></li><li>#800: <a href=https://github.com/hacspec/hax/pull/800>feat(engine/ocaml_of_json_schema): add <code>val</code> to keyword list</a></li><li>#799: <a href=https://github.com/hacspec/hax/pull/799>fix(bounded-ints): zero and one were inverted</a></li><li>#797: <a href=https://github.com/hacspec/hax/pull/797>Fix potentially looping predicate_id.</a></li><li>#796: <a href=https://github.com/hacspec/hax/pull/796>Add nicer error messages when rustc emits an error in detect_forking.</a></li><li>#795: <a href=https://github.com/hacspec/hax/pull/795>fix: precondition constraints should be of the shape <code>true => pred</code></a></li><li>#794: <a href=https://github.com/hacspec/hax/pull/794>Resugar asserts</a></li><li>#792: <a href=https://github.com/hacspec/hax/pull/792>feat(frontend): Add option to control output directory</a></li><li>#790: <a href=https://github.com/hacspec/hax/pull/790>Allow <code>ensures</code> and <code>requires</code> on traits</a></li><li>#788: <a href=https://github.com/hacspec/hax/pull/788>Fix #296</a></li><li>#779: <a href=https://github.com/hacspec/hax/pull/779>Support let-else pattern.</a></li><li>#777: <a href=https://github.com/hacspec/hax/pull/777>Small typo fixes for hax book</a></li><li>#776: <a href=https://github.com/hacspec/hax/pull/776>feat(book): fix checkboxes</a></li><li>#769: <a href=https://github.com/hacspec/hax/pull/769>Extensions to the proof-libs for libcrux-ml-kem</a></li><li>#765: <a href=https://github.com/hacspec/hax/pull/765>fix(engine/lib): import associated item projection on generic bounds</a></li><li>#764: <a href=https://github.com/hacspec/hax/pull/764>feat(hax-lib): allow requires & ensures on <code>&amp;mut</code> inputs functions</a></li><li>#763: <a href=https://github.com/hacspec/hax/pull/763>fix(hax-lib): refinements: various fixes</a></li><li>#762: <a href=https://github.com/hacspec/hax/pull/762>fix(hax-lib): <code>use super::*</code> in refinement expansion</a></li><li>#759: <a href=https://github.com/hacspec/hax/pull/759>fix(frontend): crashes on fn ptr</a></li><li>#758: <a href=https://github.com/hacspec/hax/pull/758>fix color printing in util script</a></li><li>#756: <a href=https://github.com/hacspec/hax/pull/756>fix(frontend): kill <code>crate_type</code> in <code>HaxMeta</code></a></li><li>#753: <a href=https://github.com/hacspec/hax/pull/753>exporter: make it need nightly only when feature <code>rustc</code> is on</a></li><li>#751: <a href=https://github.com/hacspec/hax/pull/751>Engine: propagate trait generics arguments</a></li><li>#750: <a href=https://github.com/hacspec/hax/pull/750>feat(exporter): thir: call: separate trait VS method generic args</a></li><li>#744: <a href=https://github.com/hacspec/hax/pull/744>doc(engine): ppx_functor_application</a></li><li>#743: <a href=https://github.com/hacspec/hax/pull/743>Refactor of the frontend</a></li><li>#730: <a href=https://github.com/hacspec/hax/pull/730>fix(frontend): make <code>path_to</code> breadth-first</a></li><li>#729: <a href=https://github.com/hacspec/hax/pull/729>Move book from <code>hacspec/book</code> to <code>hacspec/hax</code></a></li><li>#727: <a href=https://github.com/hacspec/hax/pull/727>fix(engine): <code>Concrete_ident_generated</code>: <code>name</code> -> <code>t</code>, derive more</a></li><li>#698: <a href=https://github.com/hacspec/hax/pull/698>Generate visitors automatically</a></li></ul><h1 id=contributors>Contributors<a hidden class=anchor aria-hidden=true href=#contributors>#</a></h1><ul><li><a href=https://github.com/paulmure>paulmure</a></li><li><a href=https://github.com/maximebuyse>maximebuyse</a></li><li><a href=https://github.com/karthikbhargavan>karthikbhargavan</a></li><li><a href=https://github.com/W95Psp>W95Psp</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://hacspec.org/blog/tags/this-month-in-hax/>This-Month-in-Hax</a></li></ul><nav class=paginav><a class=prev href=https://hacspec.org/blog/posts/this-month-in-hax/2024-09/><span class=title>Â« Prev</span><br><span>This month in hax: September 2024</span>
</a><a class=next href=https://hacspec.org/blog/posts/this-month-in-hax/2024-06/><span class=title>Next Â»</span><br><span>This month in hax: June 2024</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://hacspec.org/blog/>hax</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>